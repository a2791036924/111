<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è€ƒç ”åŠ æ²¹ - ç¥ç¦é¡µé¢</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: #000;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            font-family: 'Microsoft YaHei', sans-serif;
        }

        #fireworks {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        .message-container {
            position: relative;
            z-index: 2;
            text-align: center;
            color: #fff;
            text-shadow: 0 0 15px rgba(255,255,255,0.8);
            mix-blend-mode: difference;
        }

        .message {
            font-size: calc(1.8em + 2vw);
            font-weight: bold;
            margin-bottom: calc(15px + 2vh);
            padding: 0 20px;
            opacity: 0;
            visibility: hidden;
            animation: floating 3s ease-in-out infinite;
            background: linear-gradient(90deg, 
                #00ffff,
                #ffffff,
                #ffd700,
                #ffffff,
                #00ffff
            );
            background-size: 200%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            filter: drop-shadow(0 0 8px rgba(255,255,255,0.8));
        }

        .message.show {
            visibility: visible;
            animation: popIn 1s forwards, floating 3s ease-in-out infinite, rainbow 3s linear infinite;
        }

        .flower {
            position: fixed;
            pointer-events: none;
            animation: falling 10s linear infinite;
            z-index: 3;
            opacity: 0.8;
            text-shadow: 0 0 5px rgba(255,255,255,0.3);
            font-size: calc(10px + 1vw) !important;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes falling {
            0% { 
                transform: translateY(-100vh) rotate(0deg) translateX(0);
                opacity: 0;
            }
            10% {
                opacity: 0.8;
            }
            100% { 
                transform: translateY(100vh) rotate(360deg) translateX(100px);
                opacity: 0;
            }
        }

        @keyframes floating {
            0% { transform: translateY(0px) rotate(-1deg); }
            50% { transform: translateY(-15px) rotate(1deg); }
            100% { transform: translateY(0px) rotate(-1deg); }
        }

        @keyframes rainbow {
            0% { background-position: 0% 50%; }
            100% { background-position: 200% 50%; }
        }

        @keyframes popIn {
            0% { 
                opacity: 0;
                transform: scale(0.3) translateY(100px);
                filter: blur(10px);
            }
            70% {
                transform: scale(1.1) translateY(-10px);
                filter: blur(0px);
            }
            100% { 
                opacity: 1;
                transform: scale(1) translateY(0);
                filter: blur(0px);
            }
        }

        @keyframes sway {
            0%, 100% { transform: translateX(0); }
            50% { transform: translateX(30px); }
        }

        .special-message {
            font-size: calc(1.2em + 1.5vw);
            line-height: 1.6;
            margin-top: calc(25px + 2vh);
            padding: 15px;
            max-width: 90vw;
            margin-left: auto;
            margin-right: auto;
            opacity: 0;
            visibility: hidden;
            background: linear-gradient(90deg, 
                #ff9a9e,
                #fad0c4,
                #fad0c4,
                #ff9a9e
            );
            background-size: 200%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            filter: drop-shadow(0 0 8px rgba(255,255,255,0.5));
        }

        .special-message.show {
            visibility: visible;
            animation: popIn 1.5s forwards, floating 4s ease-in-out infinite, rainbow 4s linear infinite;
        }

        /* æ·»åŠ ç§»åŠ¨ç«¯åª’ä½“æŸ¥è¯¢ */
        @media screen and (max-width: 768px) {
            .message-container {
                padding: 20px;
                width: 100%;
                box-sizing: border-box;
            }

            .message {
                margin-bottom: 20px;
            }

            .special-message {
                margin-top: 30px;
                padding: 10px;
            }

            .flower {
                font-size: calc(8px + 1vw) !important;
            }
        }

        /* æ·»åŠ æ¨ªå±é€‚é… */
        @media screen and (orientation: landscape) and (max-height: 500px) {
            .message-container {
                padding: 10px;
            }

            .message {
                margin-bottom: 15px;
                font-size: calc(1.5em + 1.5vw);
            }

            .special-message {
                margin-top: 20px;
                font-size: calc(1em + 1vw);
            }
        }
    </style>
</head>
<body>
    <canvas id="fireworks"></canvas>
    <div class="message-container">
        <div class="message">âœ¨ æ„¿ä½ æŠ«è†æ–©æ£˜ï¼Œæ‰€å‘æŠ«é¡ âœ¨</div>
        <div class="message" style="animation-delay: 1s">ğŸŒŸ ä¹˜é£ç ´æµªï¼Œä¸€ä¸¾ä¸Šå²¸ ğŸŒŸ</div>
        <div class="message" style="animation-delay: 2s">ğŸ’« è€ƒç ”åŠ æ²¹ï¼Œé¡ºé£é¡ºæ°´ï¼ğŸ’«</div>
        <div class="special-message" style="animation-delay: 3s">
            ç¬¬ä¸€æ¬¡è¿™ä¹ˆè®¤çœŸçœ‹ä¸€ä¸ªäººè¿™ä¹ˆåŠªåŠ›ï¼Œ<br>
            æ˜å¤©ç»™åšæŒè¿™ä¹ˆä¹…çš„è‡ªå·±ä¸€ä¸ªå¥½ç»“æœå§ï¼Œ<br>
            åŠ æ²¹å“¦ï¼ï¼é©¬ä½³èŒ¹åŒå­¦ï¼ï¼ ğŸ’ªâœ¨
        </div>
    </div>

    <script>
        // çƒŸèŠ±ç‰¹æ•ˆ
        const canvas = document.getElementById('fireworks');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        class Firework {
            constructor() {
                this.reset();
            }

            reset() {
                this.x = Math.random() * canvas.width;
                this.y = canvas.height;
                this.targetY = Math.random() * (canvas.height * 0.6);
                this.speed = 2 + Math.random() * (window.innerWidth > 768 ? 3 : 2);
                this.particles = [];
                this.exploded = false;
            }

            update() {
                if (!this.exploded) {
                    this.y -= this.speed;
                    if (this.y <= this.targetY) {
                        this.explode();
                    }
                }
                
                for (let i = this.particles.length - 1; i >= 0; i--) {
                    this.particles[i].update();
                    if (this.particles[i].alpha <= 0) {
                        this.particles.splice(i, 1);
                    }
                }

                if (this.exploded && this.particles.length === 0) {
                    this.reset();
                }
            }

            explode() {
                this.exploded = true;
                const particleCount = window.innerWidth > 768 ? 100 : 50;
                for (let i = 0; i < particleCount; i++) {
                    this.particles.push(new Particle(this.x, this.y));
                }
                setTimeout(() => {
                    const secondaryCount = window.innerWidth > 768 ? 50 : 25;
                    for (let i = 0; i < secondaryCount; i++) {
                        this.particles.push(new Particle(this.x, this.y));
                    }
                }, 100);
            }

            draw() {
                if (!this.exploded) {
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, 2, 0, Math.PI * 2);
                    ctx.fillStyle = 'white';
                    ctx.fill();
                }
                
                for (const particle of this.particles) {
                    particle.draw();
                }
            }
        }

        class Particle {
            constructor(x, y) {
                this.x = x;
                this.y = y;
                this.angle = Math.random() * Math.PI * 2;
                this.speed = Math.random() * 5;
                this.alpha = 1;
                this.decay = 0.02;
                this.colors = [
                    '#FF0000', // çº¢
                    '#00FF00', // ç»¿
                    '#0000FF', // è“
                    '#FFFF00', // é»„
                    '#FF00FF', // ç´«
                    '#00FFFF', // é’
                    '#FFA500', // æ©™
                    '#FF1493', // ç²‰
                    '#FFD700'  // é‡‘
                ];
                this.color = this.colors[Math.floor(Math.random() * this.colors.length)];
                this.size = Math.random() * 3 + 1; // éšæœºç²’å­å¤§å°
            }

            update() {
                this.x += Math.cos(this.angle) * this.speed;
                this.y += Math.sin(this.angle) * this.speed + 0.5; // æ·»åŠ é‡åŠ›æ•ˆæœ
                this.alpha -= this.decay;
                this.speed *= 0.99; // å‡é€Ÿæ•ˆæœ
            }

            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fillStyle = `${this.color}${Math.floor(this.alpha * 255).toString(16).padStart(2, '0')}`;
                ctx.fill();
            }
        }

        const fireworks = [new Firework()];

        let initialFireworksLaunched = false;
        const messages = document.querySelectorAll('.message, .special-message');
        
        // åˆå§‹çƒŸèŠ±å‘å°„
        function launchInitialFireworks() {
            return new Promise((resolve) => {
                let count = 0;
                const totalFireworks = 5;
                const interval = setInterval(() => {
                    const firework = new Firework();
                    firework.x = canvas.width * (count + 1) / (totalFireworks + 1);
                    fireworks.push(firework);
                    count++;
                    
                    if (count >= totalFireworks) {
                        clearInterval(interval);
                        setTimeout(resolve, 1500); // ç­‰å¾…çƒŸèŠ±çˆ†ç‚¸
                    }
                }, 300);
            });
        }

        // æ˜¾ç¤ºæ–‡å­—åŠ¨ç”»
        function showMessages() {
            messages.forEach((message, index) => {
                setTimeout(() => {
                    message.classList.add('show');
                }, index * 800);
            });
        }

        // æŒç»­å‘å°„çƒŸèŠ±
        function continuousFireworks() {
            if (Math.random() < 0.05) {
                fireworks.push(new Firework());
            }
        }

        // ä¸»åŠ¨ç”»å¾ªç¯
        function animate() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // åªåœ¨å®Œæˆåˆå§‹å‘å°„åæ‰ç»§ç»­å‘å°„æ–°çƒŸèŠ±
            if (initialFireworksLaunched) {
                continuousFireworks();
            }

            for (let i = fireworks.length - 1; i >= 0; i--) {
                fireworks[i].update();
                fireworks[i].draw();
                if (fireworks[i].exploded && fireworks[i].particles.length === 0) {
                    fireworks.splice(i, 1);
                }
            }

            requestAnimationFrame(animate);
        }

        // æ›´æ–°èŠ±ç“£æ•ˆæœ
        const flowers = ['ğŸŒ¸', 'ğŸŒº', 'ğŸŒ¹', 'ğŸŒ·', 'ğŸŒ¼', 'ğŸŒ»', 'ğŸ’', 'ğŸª·', 'ğŸ€'];
        const colors = ['#ffb7c5', '#ff69b4', '#ff1493', '#ff69b4', '#dda0dd'];
        
        function createFlower() {
            const flower = document.createElement('div');
            flower.className = 'flower';
            
            // éšæœºä½ç½®å’Œå¤§å°
            const startX = Math.random() * window.innerWidth;
            flower.style.left = startX + 'px';
            
            // éšæœºé€‰æ‹©èŠ±æœµ
            flower.innerHTML = flowers[Math.floor(Math.random() * flowers.length)];
            
            // å“åº”å¼å¤§å°è°ƒæ•´
            const baseSize = Math.min(window.innerWidth, window.innerHeight) * 0.05;
            const size = baseSize + Math.random() * baseSize;
            flower.style.fontSize = `${size}px`;
            
            // éšæœºåŠ¨ç”»æŒç»­æ—¶é—´
            const duration = 8 + Math.random() * 7;
            flower.style.animation = `falling ${duration}s linear infinite`;
            
            // éšæœºæ—‹è½¬è§’åº¦
            const rotation = Math.random() * 360;
            flower.style.transform = `rotate(${rotation}deg)`;
            
            // æ·»åŠ æ‘‡æ‘†æ•ˆæœ
            if(Math.random() > 0.5) {
                flower.style.animation += `, sway ${2 + Math.random() * 3}s ease-in-out infinite`;
            }
            
            document.body.appendChild(flower);

            // åœ¨åŠ¨ç”»ç»“æŸåç§»é™¤å…ƒç´ 
            setTimeout(() => {
                flower.remove();
            }, duration * 1000);
        }

        // åˆ›å»ºèŠ±ç“£é›¨æ•ˆæœ
        function createFlowerRain() {
            // åˆå§‹åŒ–æ—¶åˆ›å»ºå¤šä¸ªèŠ±ç“£
            for(let i = 0; i < 10; i++) {
                setTimeout(createFlower, i * 300);
            }
            
            // æŒç»­åˆ›å»ºæ–°çš„èŠ±ç“£
            setInterval(() => {
                if(document.querySelectorAll('.flower').length < 30) { // é™åˆ¶æœ€å¤§æ•°é‡
                    createFlower();
                }
            }, 500);
        }

        // ä¿®æ”¹å¯åŠ¨åºåˆ—
        async function startSequence() {
            animate(); // å¼€å§‹åŠ¨ç”»å¾ªç¯
            await launchInitialFireworks(); // ç­‰å¾…åˆå§‹çƒŸèŠ±å‘å°„å®Œæˆ
            showMessages(); // æ˜¾ç¤ºæ–‡å­—
            initialFireworksLaunched = true; // å¯ç”¨æŒç»­çƒŸèŠ±
            
            // å»¶è¿Ÿ2ç§’åå¼€å§‹èŠ±ç“£æ•ˆæœ
            setTimeout(() => {
                createFlowerRain();
            }, 2000);
        }

        // å¼€å§‹å±•ç¤º
        startSequence();

        // å“åº”å¼è°ƒæ•´
        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });

        // æ·»åŠ è®¾å¤‡æ–¹å‘å˜åŒ–ç›‘å¬
        window.addEventListener('orientationchange', () => {
            setTimeout(() => {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            }, 200);
        });

        // ä¼˜åŒ–æ€§èƒ½
        function optimizeForMobile() {
            const isMobile = window.innerWidth <= 768;
            if (isMobile) {
                // å‡å°‘èŠ±ç“£æ•°é‡
                const maxFlowers = 15;
                const flowers = document.querySelectorAll('.flower');
                if (flowers.length > maxFlowers) {
                    for (let i = maxFlowers; i < flowers.length; i++) {
                        flowers[i].remove();
                    }
                }
            }
        }

        // æ·»åŠ æ€§èƒ½ä¼˜åŒ–æ£€æŸ¥
        setInterval(optimizeForMobile, 2000);
    </script>
</body>
</html> 